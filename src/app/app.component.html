<loading></loading>

<mat-toolbar [ngClass]="{'hidden-header': !isLoggedIn}">
    <button mat-icon-button [ngClass]="{'invisible': isPinned}" (click)="clickHamburger();" >
        <mat-icon>menu</mat-icon>
    </button>
    
    <!-- <div class="logo" >
        <img class="logo-img" src="./assets/logoscritta.svg">
    </div> -->
    <div class="logo" >
        <div class="logo-img2"></div>
    </div>
    <div style="position: absolute; right: 30px;">
        <button mat-icon-button [matMenuTriggerFor]="menu" >
            <mat-icon *ngIf="imgAccount == '' || imgAccount== null ">account_circle</mat-icon>
            <img #myImg *ngIf="imgAccount != '' && imgAccount != null " class="w40px  br200 _bordered-white " [src]="imgAccount">        
        </button>
    </div>
</mat-toolbar>

<mat-menu #menu  >
    <button mat-menu-item routerLink="profilo"  >
        <mat-icon>account_box</mat-icon>
        <span>{{userFullName}}</span>
    </button>

    <button mat-menu-item routerLink="change-psw" >
        <mat-icon>password</mat-icon>
        <span>Cambia password</span>
    </button>

    <button mat-menu-item (click)="logOut()"  >
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
    </button>
</mat-menu>

<mat-sidenav-container fullscreen autosize>
    <mat-sidenav *ngIf="isLoggedIn" class="leftSidenav" mode="side" opened="true" disableClose>

        <mat-nav-list class="mynavlist">
            <!-- <div mat-list-item>
                <img  class="logo-img ml15 mt50" src="./assets/logoscrittaazzurro.svg">
            </div> -->

            <!-- <a mat-list-item *ngIf="isExpanded" class="_pinIconContainer h20px mt60 " >

            </a> -->

            <a mat-list-item class="h35px mt60" routerLink="home" (click)="clickMenuItem()"  >
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/home.svg">
                <span *ngIf="isExpanded">Home</span>


            </a>
            <div class="_pos-absolute" style="width: 20px; top: 75px; left: 210px;">
                <img *ngIf="isExpanded && !isPinned" class="_pinIcon _pos-absolute r0" src="./assets/mainMenuWhite/pinMenu.svg" (click)="clickPin()" >
                <img *ngIf="isExpanded && isPinned" class="_pinIcon _pos-absolute r0" src="./assets/mainMenuWhite/unpinMenu.svg" (click)="clikUnPin()" >
            </div>

            <a mat-list-item class="h35px" routerLink="calendario" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/calendar.svg">
                <span *ngIf="isExpanded">Calendario</span>
            </a>

            <a mat-list-item class="h35px" routerLink="orario-page" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/calendar_classi.svg">
                <span *ngIf="isExpanded">Orario per Classe</span>
            </a>

            <mat-divider></mat-divider>
            <a mat-list-item class="h35px" routerLink="alunni" (click)="clickMenuItem()" >
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/alunno.svg">
                <span *ngIf="isExpanded">Alunni</span>
            </a>

            <a mat-list-item class="h35px" routerLink="genitori" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/genitore.svg">
                <span *ngIf="isExpanded">Genitori</span>
            </a>  

            <a mat-list-item class="h35px" routerLink="persone" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/persona.svg">
                <span *ngIf="isExpanded">Personale</span>
            </a>

            <a mat-list-item class="h35px" routerLink="soci" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/socio.svg">
                <span *ngIf="isExpanded">Soci</span>
            </a>

            <mat-divider></mat-divider>

            <a mat-list-item class="h35px" routerLink="iscrizioni" (click)="clickMenuItem()" >
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/iscrizione.svg">
                <span *ngIf="isExpanded">Iscrizioni</span>
            </a>

<!-- Classi -->
            <a mat-list-item class="h35px" *ngIf="!isExpanded" (click)="isExpanded = true; expandClassi()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/classiSezioniAnni_expand.svg">
            </a>

            <mat-expansion-panel *ngIf="isExpanded" class="transparent expansionMainMenu mat-elevation-z0" #expansionClassi>
                <mat-expansion-panel-header class="h35px sidenav-expansion-panel-header">
                  <mat-panel-title>
                    <img class="iconaMenuSidenav mr10"  src="./assets/mainMenuWhite/classiSezioniAnni.svg">
                    <span class="fs16" >Area Coord. Did.</span>
                  </mat-panel-title>
                  <mat-panel-description> </mat-panel-description>
                </mat-expansion-panel-header>

                <mat-divider></mat-divider>
                
                <a mat-list-item class="h35px" routerLink="classi" (click)="clickMenuItem()">
                    <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/classiSezioniAnniList.svg">
                    <span>Classi</span>
                </a> 

                <a mat-list-item class="h35px" routerLink="classi-dashboard" (click)="clickMenuItem()">
                    <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/classiSezioniAnniDashboard.svg">
                    <span>Cruscotto Coord. Did.</span>
                </a>
                <mat-divider></mat-divider>
            </mat-expansion-panel>

 <!-- Docenti -->
            <a mat-list-item class="h35px" *ngIf="!isExpanded" (click)="isExpanded = true; expandDocenti()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/docente_expand.svg">
            </a>

            <mat-expansion-panel *ngIf="isExpanded" class="transparent expansionMainMenu mat-elevation-z0" #expansionDocenti>
                <mat-expansion-panel-header class="h35px sidenav-expansion-panel-header">
                    <mat-panel-title>
                        <img class="iconaMenuSidenav mr10"  src="./assets/mainMenuWhite/docente.svg">
                        <span class="fs16" >Area Docente</span>
                    </mat-panel-title>
                    <mat-panel-description> </mat-panel-description>
                </mat-expansion-panel-header>

                <mat-divider></mat-divider>

                <a mat-list-item class="h35px" routerLink="calendario-docente" (click)="clickMenuItem()">
                    <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/calendar_docente.svg">
                    <span>Orario Docente</span>
                </a> 

                <a mat-list-item class="h35px" routerLink="docenti-dashboard" (click)="clickMenuItem()">
                    <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/classi_docente.svg">
                    <span>Cruscotto Docente</span>
                </a>

            </mat-expansion-panel>

 <!-- Pagamenti -->
            <a mat-list-item class="h35px" *ngIf="!isExpanded" (click)="isExpanded = true; expandPagamenti()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/money_expand.svg">
            </a>
            <mat-expansion-panel *ngIf="isExpanded" class="transparent expansionMainMenu mat-elevation-z0" #expansionPagamenti>
                <mat-expansion-panel-header class="h35px sidenav-expansion-panel-header">
                    <mat-panel-title>
                        <img class="iconaMenuSidenav mr10" src="./assets/mainMenuWhite/money.svg">
                        <span class="fs16" *ngIf="isExpanded">Ricavi</span>
                    </mat-panel-title>
                    <mat-panel-description></mat-panel-description>
                </mat-expansion-panel-header>
                <mat-divider></mat-divider>

                <a mat-list-item class="h35px" routerLink="pagamenti" (click)="clickMenuItem()">
                    <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/pagamenti.svg">
                    <span>Pagamenti</span>
                </a> 
                <a mat-list-item class="h35px" routerLink="rette" (click)="clickMenuItem()">
                    <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/retteList.svg">
                    <span>Rette</span>
                </a> 
            </mat-expansion-panel>

            <mat-divider></mat-divider>



            <a mat-list-item class="h35px" routerLink="verbali" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/verbale.svg">
                <span *ngIf="isExpanded">Verbali</span>
            </a>

            <!-- <a mat-list-item class="h35px" routerLink="template" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/template.svg">
                <span *ngIf="isExpanded">Template</span>
            </a> -->

            


            <a mat-list-item class="h35px" routerLink="users" (click)="clickMenuItem()" *ngIf="currUser && currUser.TipoPersona!.ckPersonale == true">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/utente.svg">
                <span *ngIf="isExpanded">Gestione Utenti</span>
            </a> 

            <a mat-list-item class="h35px" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/tutorial.svg">
                <span *ngIf="isExpanded">Tutorials</span>
            </a>

            <!-- <a mat-list-item class="h35px" routerLink="procedura-iscrizione" (click)="clickMenuItem()">
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/procedura.svg">
                <span *ngIf="isExpanded">Procedura Iscrizione</span>
            </a> -->

            <a mat-list-item class="_pos-absolute_i _border-top _grey-background b0 topZindex" 
                routerLink="impostazioni"
                (click)="clickMenuItem()"  
                *ngIf="currUser && currUser.TipoPersona!.descrizione == 'SysAdmin'"
                
                >
                <!-- *ngIf="currUser && se nella lista dei ruoli c'è SysAdmin" -->
                <img class="iconaMenuSidenav" src="./assets/mainMenuWhite/settings.svg">
                <span *ngIf="isExpanded">Impostazioni</span>
            </a>

        </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
        <hr style="height: 48px"  [ngClass]="{'hidden-header': !isLoggedIn}"> 
        <router-outlet class="mt80"></router-outlet>
    </mat-sidenav-content>
</mat-sidenav-container>





