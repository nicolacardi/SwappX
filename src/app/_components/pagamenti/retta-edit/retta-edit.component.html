<!-- 
    Rev.0 - 28/08/2021
    Componente per l'edit della retta
    Composto da: 
        - Barra Funzioni
       
        - TODO !!!!

AS: Attenzione: mettendo la riga di edit del pagamento qui si crea un bel smisiotto: Ã¨ il componente di editazione della retta 
ma fa anche l'aggiornamento del pagamento.... uhmmm.....
-->

<div class="container">
    <mat-card class="form-cardRette data-form">
        <mat-card-content>
            

            <div class="mt10" *ngIf="obsRette$ | async" >
                <mat-form-field class="cellRettaEdit" appearance="outline">
                    <mat-label>anno scolastico</mat-label>
                    <input matInput placeholder="anno scolastico" value="{{anno.annoscolastico}}" readonly>
                </mat-form-field>

                <mat-form-field class="cellRettaEdit" appearance="outline">
                    <mat-label>nome alunno</mat-label>
                    <input matInput placeholder="anno scolastico" value="{{alunno.nome}}" readonly>
                </mat-form-field>

                <mat-form-field class="cellRettaEdit" appearance="outline">
                    <mat-label>cognome alunno</mat-label>
                    <input matInput placeholder="anno scolastico" value="{{alunno.cognome}}" readonly>
                </mat-form-field>
            </div>  
            <mat-grid-list [cols]="14" rowHeight="130px">
                <mat-grid-tile [colspan]=2>
                    <div>
                        <br>
                        <div class="mt10">DEFAULT</div>
                        <div class="mt10">CONCORDATE</div>
                        <div class="mt10">PAGATE</div>
                    </div>
                </mat-grid-tile>

                <mat-grid-tile *ngFor="let mese of mesiArr; let i = index" >
                    <div>
                        <mat-label>{{placeholderMeseArr[i]}}</mat-label>
                        <app-rettamese-edit [inputPagamenti] ="totPagamenti[mese]"
                                            [idRetta] ="idRette[mese]"
                                            [indice] ="i"
                                            [toHighlight] = "idToHighlight"
                                            >
                        </app-rettamese-edit>
                    </div>
                </mat-grid-tile>
            </mat-grid-list>
            <mat-tab-group mat-align-tabs="center">
                <mat-tab label="Rette">

                    <div class="pagamenti-container cellBordered mt10">
                        Utilities vari per la definizione veloce delle rette
                    </div>
                    
                </mat-tab>
                <mat-tab label="Pagamenti">
                    
                    <div class="pagamenti-container cellBordered mt10">
                        <app-pagamenti-list [dove]="'retta-edit'" 
                                            [alunnoID]="data.idAlunno"
                                            [annoID]="data.idAnno"
                                            (hoverPagamento) = hoverPagamentoArrivato($event)
                                            >
                        </app-pagamenti-list>
                    </div>
                    <app-rettapagamento-edit
                                            [alunnoID]="data.idAlunno"
                                            [annoID]="data.idAnno"
                                            (nuovoPagamento) = "nuovoPagamentoArrivato()">
                    </app-rettapagamento-edit>
                </mat-tab>
            </mat-tab-group>
            
        </mat-card-content>
    </mat-card>
</div>



